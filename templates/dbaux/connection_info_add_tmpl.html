<!--HTML-->
<div class="row">
    <div class="col-sm-12">
        <div class="king-block king-block-bordered">
            <div class="king-block-header king-gray-light">
                <ul class="king-block-options">
                    <li>
                        <button type="button"><i class="fa fa-cog"></i></button>
                    </li>
                </ul>
                <h3 class="king-block-title">{{ title }}</h3>
            </div>
            <div class="king-block-content">
                <!-- 水平布局表单-1 Start -->
                <form class="form-horizontal" method="POST">
                    <div class="form-group">
                        <label for="inputName1" class="col-sm-3 control-label">名称：</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputName1" placeholder="输入便于识别的名称">
                        </div>
                        <span class="text-danger mt5 fl">*</span>
                    </div>
                    <div class="form-group">
                        <label for="inputHostAddress1" class="col-sm-3 control-label">数据库主机：</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputHostAddress1" placeholder="IP地址">
                        </div>
                        <span class="text-danger mt5 fl">*</span>
                    </div>
                    <div class="form-group">
                        <label for="inputPort1" class="col-sm-3 control-label">端口：</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputPort1" placeholder="数据库服务端口">
                        </div>
                        <span class="text-danger mt5 fl">*</span>
                    </div>
                    <div class="form-group">
                        <label for="inputUserName1" class="col-sm-3 control-label">用户名：</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputUserName1" placeholder="连接数据库的用户名">
                        </div>
                        <span class="text-danger mt5 fl">*</span>
                    </div>
                    <div class="form-group">
                        <label for="inputPassword1" class="col-sm-3 control-label">密码：</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputPassword1" placeholder="连接数据库的密码">
                        </div>
                        <span class="text-danger mt5 fl">*</span>
                    </div>
                    <div class="form-group">
                        <label for="inputDatabaseName1" class="col-sm-3 control-label">数据库名称：</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="inputDatabaseName1" placeholder="">
                        </div>
                        <span class="text-danger mt5 fl">*</span>
                    </div>
                    <div class="form-group">
                        <label for="inputCharset1" class="col-sm-3 control-label">连接字符集：</label>
                        <div class="col-sm-7">
                            <select name="" id="inputCharset1" class="form-control">
                                <option value="utf8">utf8</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-7 col-sm-offset-3">
                            <input type="button" class="king-btn king-success mr10" id="btn_add" value="添加">
                            <input type="reset" class="king-btn king-default" id="btn_cancel" value="取消">
                        </div>
                    </div>
                </form>
                <!-- 水平布局表单-1 End -->
            </div>
        </div>
    </div>
    <script type="text/javascript">
    $(function() {
        $('#btn_add').click(function () {
            data = {
                'name': $('#inputName1').val().trim(),
                'host': $('#inputHostAddress1').val().trim(),
                'port': $('#inputPort1').val().trim(),
                'user': $('#inputUserName1').val().trim(),
                'password': $('#inputPassword1').val().trim(),
                'database': $('#inputDatabaseName1').val().trim(),
                'charset': $('#inputCharset1').val(),
            };

            $.ajax({
                "type": "POST",
                "url": window.location.pathname + "system_config/add/" + {{ object_type }} + "/",
                "data": data,
                "dataType": "json",
                "success": function (response) {
                    if(response.result) {
                        $topBar({
                            text: '操作成功！',
                            setClass: 'bg-success',
                            timeOut: 5000
                        });
                        $.get(
                            url = window.location.pathname + 'system_config/list/' + {{ object_type }} + '/',
                            function(response, textStatus){
                                if(response.result) {
                                    $("#content_14904127718185").html(response.data);
                                } else {
                                    $topBar({
                                        text: '操作失败: ' + response.message,
                                        setClass: 'bg-danger'
                                    });
                                }
                            },
                            'json');
                    } else {
                        $topBar({
                            text: '操作失败: ' + response.message,
                            setClass: 'bg-danger'
                        });
                    }
                },
            });
        });
    });
    </script>
</div>